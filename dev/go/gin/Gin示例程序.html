<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.classList.toggle('dark', true)
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>一、Gin 示例程序 | Yi-Docs</title><meta name="description" content="你好！我是子亿，一名计算机专业在读研究生。这是我的个人博客。">
    <link rel="preload" href="/yi-doc/assets/style-DDc10VHf.css" as="style"><link rel="stylesheet" href="/yi-doc/assets/style-DDc10VHf.css">
    <link rel="modulepreload" href="/yi-doc/assets/app-zKhBrQ4K.js"><link rel="modulepreload" href="/yi-doc/assets/Gin示例程序.html-DLP54Yqn.js">
    <link rel="prefetch" href="/yi-doc/assets/index.html-Cl3gLU-6.js" as="script"><link rel="prefetch" href="/yi-doc/assets/get-started.html--9LPkFUQ.js" as="script"><link rel="prefetch" href="/yi-doc/assets/index.html-rsmwxrs7.js" as="script"><link rel="prefetch" href="/yi-doc/assets/index.html-CWIU42Ef.js" as="script"><link rel="prefetch" href="/yi-doc/assets/index.html-CXURzv_K.js" as="script"><link rel="prefetch" href="/yi-doc/assets/index.html-BZZeXLNA.js" as="script"><link rel="prefetch" href="/yi-doc/assets/go_basic.html-CMPlxty9.js" as="script"><link rel="prefetch" href="/yi-doc/assets/index.html-CktCF9OE.js" as="script"><link rel="prefetch" href="/yi-doc/assets/SpringSecurity.html-CkycY2ue.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-Docker.html-d5ZzLLVy.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-环境安装.html-D-COS8cI.js" as="script"><link rel="prefetch" href="/yi-doc/assets/2-基本结构和基本数据类型.html-C4vZycsI.js" as="script"><link rel="prefetch" href="/yi-doc/assets/3-控制结构.html-DgojN_81.js" as="script"><link rel="prefetch" href="/yi-doc/assets/4-函数.html-CV_93Ghj.js" as="script"><link rel="prefetch" href="/yi-doc/assets/5-数组与切片.html-DuBDasMi.js" as="script"><link rel="prefetch" href="/yi-doc/assets/6-Map.html-BXT138Mq.js" as="script"><link rel="prefetch" href="/yi-doc/assets/7-结构体与方法.html-QFJbh13Z.js" as="script"><link rel="prefetch" href="/yi-doc/assets/8-接口与反射.html-DrrX-VO8.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-入门案例.html-MvlpboD-.js" as="script"><link rel="prefetch" href="/yi-doc/assets/10-TypeHandler类型转换器.html-Br70p_Hp.js" as="script"><link rel="prefetch" href="/yi-doc/assets/2-CRUD.html-H-PNcypn.js" as="script"><link rel="prefetch" href="/yi-doc/assets/3-常用注解.html-aQX-KpWy.js" as="script"><link rel="prefetch" href="/yi-doc/assets/4-条件构造器.html-k1PRhFc1.js" as="script"><link rel="prefetch" href="/yi-doc/assets/5-插件.html-PXjNuptf.js" as="script"><link rel="prefetch" href="/yi-doc/assets/6-通用枚举.html-DQIwTakE.js" as="script"><link rel="prefetch" href="/yi-doc/assets/7-代码生成器.html-B8Bcdsww.js" as="script"><link rel="prefetch" href="/yi-doc/assets/8-多数据源.html-D0LhCYlz.js" as="script"><link rel="prefetch" href="/yi-doc/assets/9-MybatisX插件.html-C4lc_OeJ.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-基本原理.html-CHALuYbh.js" as="script"><link rel="prefetch" href="/yi-doc/assets/2-认证接口.html-C7yAe403.js" as="script"><link rel="prefetch" href="/yi-doc/assets/3-其他资源接口.html-DDEn-_Xd.js" as="script"><link rel="prefetch" href="/yi-doc/assets/SpringSecurity.html-Bs3UFe6S.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-单体项目.html-Bl0MCHLQ.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-高德地图接入.html-CX_ptocG.js" as="script"><link rel="prefetch" href="/yi-doc/assets/2-AWS_S3.html-C7UKqKol.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-Feign.html-CuwR6Nsd.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-es.html-fH8eK5jJ.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-MongoDB基础.html-CiVO8EnK.js" as="script"><link rel="prefetch" href="/yi-doc/assets/2-单机部署.html-BOMcyt1I.js" as="script"><link rel="prefetch" href="/yi-doc/assets/3-基本命令.html-Dr9XtfLC.js" as="script"><link rel="prefetch" href="/yi-doc/assets/4-索引.html-fUWoM0dT.js" as="script"><link rel="prefetch" href="/yi-doc/assets/5-JavaMongo.html-Cz9CPrL4.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-Redis介绍.html-fOCu-46C.js" as="script"><link rel="prefetch" href="/yi-doc/assets/2-Redis常见命令.html-CUW-pPfu.js" as="script"><link rel="prefetch" href="/yi-doc/assets/3-RedisJava.html-DOmRNrtg.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-基本概念.html-CPD1X4Fl.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-微服务.html-B68yfKUV.js" as="script"><link rel="prefetch" href="/yi-doc/assets/2-统一网关.html-DKepfiBb.js" as="script"><link rel="prefetch" href="/yi-doc/assets/3-异步通讯.html-Be0mWemj.js" as="script"><link rel="prefetch" href="/yi-doc/assets/1-常用快捷键.html-3P35O83N.js" as="script"><link rel="prefetch" href="/yi-doc/assets/404.html-D04hrFfy.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/yi-doc/"><!----><span class="vp-site-name" aria-hidden="true">Yi-Docs</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/yi-doc/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/yi-doc/dev/" aria-label="Web 应用开发"><!---->Web 应用开发<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/yi-doc/ml/" aria-label="机器学习"><!---->机器学习<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/yi-doc/al/" aria-label="算法"><!---->算法<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/yi-doc/" aria-label="主页"><!---->主页<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/yi-doc/dev/" aria-label="Web 应用开发"><!---->Web 应用开发<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/yi-doc/ml/" aria-label="机器学习"><!---->机器学习<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/yi-doc/al/" aria-label="算法"><!---->算法<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Web 应用开发 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">工具 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">IDEA <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/tool/idea/1-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE.html" aria-label="IDEA 常用快捷键"><!---->IDEA 常用快捷键<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item active collapsible">Go <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Go 基础 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/1-%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85.html" aria-label="一、环境安装"><!---->一、环境安装<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/2-%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" aria-label="二、基本结构和基本数据类型"><!---->二、基本结构和基本数据类型<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/3-%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84.html" aria-label="三、控制结构"><!---->三、控制结构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/4-%E5%87%BD%E6%95%B0.html" aria-label="四、函数"><!---->四、函数<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/5-%E6%95%B0%E7%BB%84%E4%B8%8E%E5%88%87%E7%89%87.html" aria-label="五、数组与切片"><!---->五、数组与切片<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/6-Map.html" aria-label="六、Map"><!---->六、Map<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/7-%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%8E%E6%96%B9%E6%B3%95.html" aria-label="七、结构体与方法"><!---->七、结构体与方法<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/go/go_basic/8-%E6%8E%A5%E5%8F%A3%E4%B8%8E%E5%8F%8D%E5%B0%84.html" aria-label="八、接口与反射"><!---->八、接口与反射<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item active collapsible">Gin <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/yi-doc/dev/go/gin/Gin%E7%A4%BA%E4%BE%8B%E7%A8%8B%E5%BA%8F.html" aria-label="一、Gin 示例程序"><!---->一、Gin 示例程序<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Java <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">SpringSecurity <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/spring_security/1-%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86.html" aria-label="基本原理"><!---->基本原理<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/spring_security/2-%E8%AE%A4%E8%AF%81%E6%8E%A5%E5%8F%A3.html" aria-label="认证接口"><!---->认证接口<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/spring_security/3-%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90%E6%8E%A5%E5%8F%A3.html" aria-label="其他资源接口"><!---->其他资源接口<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">SpringBoot 多环境配置 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/springboot_multi_env/1-%E5%8D%95%E4%BD%93%E9%A1%B9%E7%9B%AE.html" aria-label="单体项目"><!---->单体项目<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">SpringBoot 第三方服务接入 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/third_party_in/1-%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E6%8E%A5%E5%85%A5.html" aria-label="高德地图接入"><!---->高德地图接入<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/third_party_in/2-AWS_S3.html" aria-label="AWS S3"><!---->AWS S3<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Java生态 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/tool/1-Feign.html" aria-label="HTTP 客户端 Feign"><!---->HTTP 客户端 Feign<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Mybatis-Plus <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/1-%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B.html" aria-label="一、Mybatis-plus 入门案例"><!---->一、Mybatis-plus 入门案例<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/2-CRUD.html" aria-label="二、Mybatis-plus 中的 CRUD"><!---->二、Mybatis-plus 中的 CRUD<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/3-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html" aria-label="三、常用注解"><!---->三、常用注解<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/4-%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8.html" aria-label="四、条件构造器"><!---->四、条件构造器<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/5-%E6%8F%92%E4%BB%B6.html" aria-label="五、插件"><!---->五、插件<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/6-%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE.html" aria-label="六、通用枚举"><!---->六、通用枚举<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/7-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8.html" aria-label="七、代码生成器"><!---->七、代码生成器<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/8-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90.html" aria-label="八、多数据源"><!---->八、多数据源<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/9-MybatisX%E6%8F%92%E4%BB%B6.html" aria-label="九、MybatisX 插件"><!---->九、MybatisX 插件<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/java/mb_plus/10-TypeHandler%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8.html" aria-label="十、TypeHandler类型转换器"><!---->十、TypeHandler类型转换器<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">中间件 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Redis <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/redis/1-Redis%E4%BB%8B%E7%BB%8D.html" aria-label="一、简介与入门"><!---->一、简介与入门<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/redis/2-Redis%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4.html" aria-label="二、Redis 常见命令"><!---->二、Redis 常见命令<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/redis/3-RedisJava.html" aria-label="三、Redis 的 Java 客户端"><!---->三、Redis 的 Java 客户端<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">MongoDB <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/mongo/1-MongoDB%E5%9F%BA%E7%A1%80.html" aria-label="一、MongoDB 基础"><!---->一、MongoDB 基础<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/mongo/2-%E5%8D%95%E6%9C%BA%E9%83%A8%E7%BD%B2.html" aria-label="二、单机部署"><!---->二、单机部署<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/mongo/3-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4.html" aria-label="三、基本命令"><!---->三、基本命令<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/mongo/4-%E7%B4%A2%E5%BC%95.html" aria-label="四、索引"><!---->四、索引<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/mongo/5-JavaMongo.html" aria-label="五、Java 操作 MongoDB"><!---->五、Java 操作 MongoDB<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">TDEngine <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/tdengine/1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" aria-label="一、基本概念"><!---->一、基本概念<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">ElasticSearch <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/middleware/es/1-es.html" aria-label="分布式搜索"><!---->分布式搜索<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">系统架构 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">微服务 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/sys_infras/micro_service/1-%E5%BE%AE%E6%9C%8D%E5%8A%A1.html" aria-label="一、微服务介绍"><!---->一、微服务介绍<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/sys_infras/micro_service/2-%E7%BB%9F%E4%B8%80%E7%BD%91%E5%85%B3.html" aria-label="二、统一网关 Gateway"><!---->二、统一网关 Gateway<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/sys_infras/micro_service/3-%E5%BC%82%E6%AD%A5%E9%80%9A%E8%AE%AF.html" aria-label="三、服务异步通讯"><!---->三、服务异步通讯<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">容器技术 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Docker <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/yi-doc/dev/container/docker/1-Docker.html" aria-label="Docker"><!---->Docker<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="一、gin-示例程序" tabindex="-1"><a class="header-anchor" href="#一、gin-示例程序"><span>一、Gin 示例程序</span></a></h1><h2 id="_1、搭建-gin-服务器步骤" tabindex="-1"><a class="header-anchor" href="#_1、搭建-gin-服务器步骤"><span>1、搭建 Gin 服务器步骤</span></a></h2><ol><li>初始化一个 Go 模块</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">go</span> mod init 模块名称</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><code>go mod init</code>命令用于初始化一个 Go 模块，其作用如下：</p><ol><li>创建模块文件：命令会在当前目录下创建一个新的<code>go.mod</code>文件，该文件用于记录项目依赖关系和模块信息。</li><li>定义模块名称：运行该命令需要提供一个模块名称作为参数。这个名称通常是一个包含项目的源代码的版本库的路径（例如，GitHub 或 GitLab 上的路径），它将成为您的项目的唯一标识符。</li><li>初始化依赖关系：命令会初始化一个依赖关系图，它会随着添加和删除依赖包而变化。这个依赖关系图会记录项目中使用的外部包，以及它们的版本信息。</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">go</span> mod init gin<span class="token operator">-</span>demo</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>在 GoLand 中打开目录</li></ol><p>配置 Go Module 代理地址：<code>https://goproxy.io</code><img src="/yi-doc/images/dev/go/gin/moudle_proxy.png" alt="image.png"></p><ol start="3"><li>创建<code>main.go</code>文件</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/ping&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span></span>
<span class="line">			<span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;pong&quot;</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8080</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>获取<code>Gin</code>包</li></ol><p>运行项目，根据提示使用<code>go get</code>命令获取<code>gin</code>包。</p><p><code>go get</code>命令用于从远程代码仓库中获取并安装 Go 包（也称为模块），具体如下：</p><ol><li><p>下载和安装包：命令可以从指定的远程代码仓库中下载 Go 包，并将其安装到 <code>GOPATH</code> 中。</p></li><li><p>自动导入包：一旦包被下载并安装，还会自动更新项目代码以导入和使用这些包。这使得可以方便地将其他人编写的 Go 代码集成到自己的项目中。</p></li><li><p>版本管理：命令可以使用版本标签（tag）或分支（branch）信息，以确保获取的是特定版本的包。这有助于管理项目的依赖关系和确保构建的稳定性。</p></li><li><p>更新依赖：如果之前使用该命令安装了某个包，并且想要更新该包以获取新的功能或修复错误，您可以再次运行命令来更新包。</p><p>安装成功后，代码将不会再提示找不到包。 运行即可： <img src="/yi-doc/images/dev/go/gin/gin_run.png" alt="image.png"></p></li></ol><h2 id="_2、接口参数获取" tabindex="-1"><a class="header-anchor" href="#_2、接口参数获取"><span>2、接口参数获取</span></a></h2><h3 id="_1-get-请求获取路径参数和请求参数" tabindex="-1"><a class="header-anchor" href="#_1-get-请求获取路径参数和请求参数"><span>(1) GET 请求获取路径参数和请求参数</span></a></h3><p>路径参数和请求参数直接从<code>context</code>中获取。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// 使用默认中间件创建一个gin路由器</span></span>
<span class="line">	<span class="token comment">// logger and recovery (crash-free) 中间件</span></span>
<span class="line">	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// get 获取路径参数和请求参数</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/getMsg/:name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// 获取路径参数</span></span>
<span class="line">		name <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// 获取请求参数</span></span>
<span class="line">		username <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">DefaultQuery</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		password <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span></span>
<span class="line">			<span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span>     name<span class="token punctuation">,</span></span>
<span class="line">			<span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> username<span class="token punctuation">,</span></span>
<span class="line">			<span class="token string">&quot;password&quot;</span><span class="token punctuation">:</span> password<span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8078&quot;</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8078</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong><code>gin.H{}</code></strong></p><p><code>gin.H{}</code>是一个用于创建并初始化一个<code>map[string]interface{}</code>类型的字典。<code>gin.H{}</code>通常用于构建 HTTP 响应的 JSON 数据或设置请求的参数。其作用如下：</p><ol><li>创建映射：<code>gin.H{}</code>创建了一个空的映射，可以在其中添加键值对，用于表示不同的数据。</li><li>构建 JSON 响应：在 Gin 框架中，可以使用<code>gin.H{}</code>构建 HTTP 响应的 JSON 数据。可以向其中添加键值对，表示要返回的 JSON 数据的字段和值。</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line">c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span></span>
<span class="line">    <span class="token string">&quot;message&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span>  <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-post-请求获取请求体中的参数" tabindex="-1"><a class="header-anchor" href="#_2-post-请求获取请求体中的参数"><span>(2) POST 请求获取请求体中的参数</span></a></h3><p>请求体使用结构体接收。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">	<span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// PostParam 将 post 请求体与结构体绑定</span></span>
<span class="line"><span class="token keyword">type</span> PostParam <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Username <span class="token builtin">string</span> <span class="token string">`json:&quot;username&quot;`</span></span>
<span class="line">	Password <span class="token builtin">string</span> <span class="token string">`json:&quot;password&quot;`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// 使用默认中间件创建一个gin路由器</span></span>
<span class="line">	<span class="token comment">// logger and recovery (crash-free) 中间件</span></span>
<span class="line">	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// POST 获取请求体参数</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">&quot;/testBind&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token keyword">var</span> postParam PostParam</span>
<span class="line"></span>
<span class="line">		<span class="token comment">// 出现错误</span></span>
<span class="line">		<span class="token keyword">if</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">ShouldBindJSON</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>postParam<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">			c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusBadRequest<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">:</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token keyword">return</span></span>
<span class="line">		<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> postParam<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8078&quot;</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8078</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-文件的接收与返回" tabindex="-1"><a class="header-anchor" href="#_3-文件的接收与返回"><span>(3) 文件的接收与返回</span></a></h3><h4 id="接收文件" tabindex="-1"><a class="header-anchor" href="#接收文件"><span>接收文件</span></a></h4><p>使用<code>form-data</code>接收文件，使用<code>SaveUploadedFile()</code>保存文件。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">	<span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// PostParam 将 post 请求体与结构体绑定</span></span>
<span class="line"><span class="token keyword">type</span> PostParam <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Username <span class="token builtin">string</span> <span class="token string">`json:&quot;username&quot;`</span></span>
<span class="line">	Password <span class="token builtin">string</span> <span class="token string">`json:&quot;password&quot;`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 存储文件路径</span></span>
<span class="line"><span class="token keyword">const</span> dist <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;./&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// 使用默认中间件创建一个gin路由器</span></span>
<span class="line">	<span class="token comment">// logger and recovery (crash-free) 中间件</span></span>
<span class="line">	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 接收文件</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">&quot;/uploadFile&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// 接收单文件</span></span>
<span class="line">		file<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">FormFile</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token comment">// 保存到服务器</span></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">SaveUploadedFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> dist<span class="token operator">+</span>file<span class="token punctuation">.</span>Filename<span class="token punctuation">)</span></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span></span>
<span class="line">			<span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;上传成功&quot;</span><span class="token punctuation">,</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8078&quot;</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8078</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请求： <img src="/yi-doc/images/dev/go/gin/interface_test.png" alt="image.png"></p><h4 id="传送文件到前端" tabindex="-1"><a class="header-anchor" href="#传送文件到前端"><span>传送文件到前端</span></a></h4><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">	<span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// PostParam 将 post 请求体与结构体绑定</span></span>
<span class="line"><span class="token keyword">type</span> PostParam <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Username <span class="token builtin">string</span> <span class="token string">`json:&quot;username&quot;`</span></span>
<span class="line">	Password <span class="token builtin">string</span> <span class="token string">`json:&quot;password&quot;`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 存储文件路径</span></span>
<span class="line"><span class="token keyword">const</span> dist <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;./&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// 使用默认中间件创建一个gin路由器</span></span>
<span class="line">	<span class="token comment">// logger and recovery (crash-free) 中间件</span></span>
<span class="line">	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 下载文件</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/downloadFile&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		filepath <span class="token operator">:=</span> <span class="token string">&quot;./1.jpg&quot;</span></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8078&quot;</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8078</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、路由分组与中间件" tabindex="-1"><a class="header-anchor" href="#_3、路由分组与中间件"><span>3、路由分组与中间件</span></a></h2><h4 id="路由分组" tabindex="-1"><a class="header-anchor" href="#路由分组"><span>路由分组</span></a></h4><p>使用路由分组代码结构更清晰、可维护，并且同一个路由分组会共享中间件。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">	<span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// PostParam 将 post 请求体与结构体绑定</span></span>
<span class="line"><span class="token keyword">type</span> PostParam <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Username <span class="token builtin">string</span> <span class="token string">`json:&quot;username&quot;`</span></span>
<span class="line">	Password <span class="token builtin">string</span> <span class="token string">`json:&quot;password&quot;`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 存储文件路径</span></span>
<span class="line"><span class="token keyword">const</span> dist <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;./&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// 使用默认中间件创建一个gin路由器</span></span>
<span class="line">	<span class="token comment">// logger and recovery (crash-free) 中间件</span></span>
<span class="line">	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// 创建路由分组</span></span>
<span class="line">	api <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">Group</span><span class="token punctuation">(</span><span class="token string">&quot;/api&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// GET 获取路径参数和请求参数</span></span>
<span class="line">		api<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/getMsg/:name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// 获取路径参数</span></span>
<span class="line">			name <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">			<span class="token comment">// 获取请求参数</span></span>
<span class="line">			username <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">DefaultQuery</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span></span>
<span class="line">			password <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">			c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span></span>
<span class="line">				<span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span>     name<span class="token punctuation">,</span></span>
<span class="line">				<span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> username<span class="token punctuation">,</span></span>
<span class="line">				<span class="token string">&quot;password&quot;</span><span class="token punctuation">:</span> password<span class="token punctuation">,</span></span>
<span class="line">			<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8078&quot;</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8078</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="中间件" tabindex="-1"><a class="header-anchor" href="#中间件"><span>中间件</span></a></h4><p>Gin 中的中间件指请求到达路由之前或之后执行的操作，其执行顺序符合洋葱模型： <img src="/yi-doc/images/dev/go/gin/union.png" alt="image.png"></p><p>在 Gin 框架中，中间件（Middleware）是一种在请求到达路由处理函数之前或之后执行的函数或操作。中间件用于对请求进行预处理、增加额外的功能、进行身份验证、记录日志、修改请求或响应等操作。它们是一种非常有用的机制，用于增强和扩展 Web 应用程序的功能。 以下是一些中间件的常见应用场景和概念：</p><ol><li><strong>身份验证和授权</strong>：中间件可以用于验证用户的身份并授权访问特定的路由或资源。例如，可以创建一个中间件来检查用户是否已登录，并根据其角色授权对某些路由的访问权限。</li><li><strong>日志记录</strong>：中间件可以用于记录请求和响应的信息，以便进行调试和监控。可以记录请求的方法、路径、响应状态码等信息，并将其存储在日志文件或数据库中。</li><li><strong>跨域资源共享 (CORS)</strong>：中间件可以帮助处理跨域请求，添加必要的响应头，以允许或限制跨域请求。</li><li><strong>压缩响应</strong>：中间件可以用于压缩响应内容，减小传输数据的大小，提高性能。</li><li><strong>请求数据解析</strong>：中间件可以用于解析请求的数据，例如 JSON、表单数据或查询参数，并将其转换为可用于处理的数据结构。</li><li><strong>缓存控制</strong>：中间件可以添加响应头来控制客户端和代理服务器的缓存行为。</li><li><strong>错误处理</strong>：中间件可以用于捕获处理函数中的错误，并返回适当的错误响应。这有助于统一的错误处理逻辑。</li><li><strong>安全性</strong>：中间件可以帮助保护应用程序免受常见的 Web 攻击，如 CSRF（跨站请求伪造）和 XSS（跨站脚本攻击）。</li></ol><p>自定义中间件、使用中间件： 定义中间件函数需要返回<code>gin.HandlerFunc</code>类型。使用中间件可以链式方式调用。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;github.com/gin-gonic/gin&quot;</span></span>
<span class="line">	<span class="token string">&quot;net/http&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// PostParam 将 post 请求体与结构体绑定</span></span>
<span class="line"><span class="token keyword">type</span> PostParam <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	Username <span class="token builtin">string</span> <span class="token string">`json:&quot;username&quot;`</span></span>
<span class="line">	Password <span class="token builtin">string</span> <span class="token string">`json:&quot;password&quot;`</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 存储文件路径</span></span>
<span class="line"><span class="token keyword">const</span> dist <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;./&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 自定义中间件1</span></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">myMiddleware1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gin<span class="token punctuation">.</span>HandlerFunc <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// before request</span></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">&quot;mid1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;嘎嘎&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;进入第一个中间件...&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// after request</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;离开第一个中间件...&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">myMiddleware2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> gin<span class="token punctuation">.</span>HandlerFunc <span class="token punctuation">{</span></span>
<span class="line">	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// before request</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;进入第二个中间件...&quot;</span><span class="token punctuation">)</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span><span class="token string">&quot;mid1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		c<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// after request</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;离开第二个中间件...&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// 使用默认中间件创建一个gin路由器</span></span>
<span class="line">	<span class="token comment">// logger and recovery (crash-free) 中间件</span></span>
<span class="line">	r <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// 创建路由分组</span></span>
<span class="line">	api <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">Group</span><span class="token punctuation">(</span><span class="token string">&quot;/api&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token function">myMiddleware1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token function">myMiddleware2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">{</span></span>
<span class="line">		<span class="token comment">// GET 获取路径参数和请求参数</span></span>
<span class="line">		api<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/getMsg/:name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// 获取路径参数</span></span>
<span class="line">			name <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">			<span class="token comment">// 获取请求参数</span></span>
<span class="line">			username <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">DefaultQuery</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span></span>
<span class="line">			password <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Query</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">			c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span></span>
<span class="line">				<span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span>     name<span class="token punctuation">,</span></span>
<span class="line">				<span class="token string">&quot;username&quot;</span><span class="token punctuation">:</span> username<span class="token punctuation">,</span></span>
<span class="line">				<span class="token string">&quot;password&quot;</span><span class="token punctuation">:</span> password<span class="token punctuation">,</span></span>
<span class="line">			<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// POST 获取请求体参数</span></span>
<span class="line">		api<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">&quot;/testBind&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token keyword">var</span> postParam PostParam</span>
<span class="line"></span>
<span class="line">			<span class="token comment">// 出现错误</span></span>
<span class="line">			<span class="token keyword">if</span> err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">ShouldBindJSON</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>postParam<span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">				c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusBadRequest<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">:</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">				<span class="token keyword">return</span></span>
<span class="line">			<span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">			c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> postParam<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// 接收文件</span></span>
<span class="line">		api<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">&quot;/uploadFile&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			<span class="token comment">// 接收单文件</span></span>
<span class="line">			file<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">FormFile</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span></span>
<span class="line">			<span class="token comment">// 保存到服务器</span></span>
<span class="line">			fullFileName <span class="token operator">:=</span> dist <span class="token operator">+</span> file<span class="token punctuation">.</span>Filename</span>
<span class="line">			c<span class="token punctuation">.</span><span class="token function">SaveUploadedFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> fullFileName<span class="token punctuation">)</span></span>
<span class="line">			c<span class="token punctuation">.</span><span class="token function">JSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span></span>
<span class="line">				<span class="token string">&quot;status&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;上传成功&quot;</span><span class="token punctuation">,</span></span>
<span class="line">			<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">		<span class="token comment">// 下载文件</span></span>
<span class="line">		api<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">&quot;/downloadFile&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">			filepath <span class="token operator">:=</span> <span class="token string">&quot;./1.jpg&quot;</span></span>
<span class="line">			c<span class="token punctuation">.</span><span class="token function">File</span><span class="token punctuation">(</span>filepath<span class="token punctuation">)</span></span>
<span class="line">		<span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	r<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">&quot;:8078&quot;</span><span class="token punctuation">)</span> <span class="token comment">// listen and serve on 0.0.0.0:8078</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4、gorm" tabindex="-1"><a class="header-anchor" href="#_4、gorm"><span>4、GORM</span></a></h2><h4 id="使用步骤" tabindex="-1"><a class="header-anchor" href="#使用步骤"><span>使用步骤</span></a></h4><ol><li>安装 GORM</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">go</span> get <span class="token operator">-</span>u gorm<span class="token punctuation">.</span>io<span class="token operator">/</span>gorm</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="2"><li>安装 MySQL 驱动</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">go</span> get <span class="token operator">-</span>u gorm<span class="token punctuation">.</span>io<span class="token operator">/</span>driver<span class="token operator">/</span>mysql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ol start="3"><li>示例代码</li></ol><p>在 GORM 中，结构体与表一一对应，使用结构体标识一张表。</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;gorm.io/driver/mysql&quot;</span></span>
<span class="line">	<span class="token string">&quot;gorm.io/gorm&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	dsn <span class="token operator">:=</span> <span class="token string">&quot;root:991118@tcp(127.0.0.1:3306)/dytest?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span>
<span class="line">	<span class="token boolean">_</span><span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>mysql<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>dsn<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>gorm<span class="token punctuation">.</span>Config<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;数据库连接成功&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token keyword">package</span> main</span>
<span class="line"></span>
<span class="line"><span class="token keyword">import</span> <span class="token punctuation">(</span></span>
<span class="line">	<span class="token string">&quot;fmt&quot;</span></span>
<span class="line">	<span class="token string">&quot;gorm.io/driver/mysql&quot;</span></span>
<span class="line">	<span class="token string">&quot;gorm.io/gorm&quot;</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// GoUser 数据库表对应的结构体</span></span>
<span class="line"><span class="token keyword">type</span> GoUser <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">	gorm<span class="token punctuation">.</span>Model</span>
<span class="line">	Name   <span class="token builtin">string</span></span>
<span class="line">	Age    <span class="token builtin">int</span></span>
<span class="line">	Gender <span class="token builtin">bool</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	dsn <span class="token operator">:=</span> <span class="token string">&quot;root:991118@tcp(localhost:3306)/dytest?charset=utf8mb4&amp;parseTime=True&amp;loc=Local&quot;</span></span>
<span class="line">	db<span class="token punctuation">,</span> err <span class="token operator">:=</span> gorm<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>mysql<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>dsn<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>gorm<span class="token punctuation">.</span>Config<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;无法连接到数据库: &quot;</span> <span class="token operator">+</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;连接数据库成功&quot;</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token punctuation">}</span></span>
<span class="line">	<span class="token comment">// 切换使用的数据库表</span></span>
<span class="line">	db<span class="token punctuation">.</span><span class="token function">AutoMigrate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>GoUser<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">	<span class="token comment">// 增</span></span>
<span class="line">	user <span class="token operator">:=</span> <span class="token operator">&amp;</span>GoUser<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">24</span><span class="token punctuation">,</span> Gender<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span></span>
<span class="line">	db<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 查</span></span>
<span class="line">	<span class="token keyword">var</span> userGot GoUser</span>
<span class="line">	db<span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>userGot<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>userGot<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 改</span></span>
<span class="line">	db<span class="token punctuation">.</span><span class="token function">Model</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>userGot<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">	<span class="token comment">// 删</span></span>
<span class="line">	db<span class="token punctuation">.</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>userGot<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: ecustzzy1@163.com">ZhangZiYi</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/yi-doc/assets/app-zKhBrQ4K.js" defer></script>
  </body>
</html>
